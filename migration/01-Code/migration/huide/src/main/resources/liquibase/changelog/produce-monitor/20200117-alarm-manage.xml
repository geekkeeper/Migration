<?xml version="1.1" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
				   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
				   http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.8.xsd">

	<!--和老iODS表一致不做修改-->
	<changeSet author="WangXun" id="1579227388687-1">
		<createTable remarks="生产报警信息" tableName="CF_Alarm">
			<column name="ID" remarks="主键" type="nvarchar(50)">
				<constraints primaryKey="true" primaryKeyName="PK_CF_Alarm"/>
			</column>
			<column name="nAlarmType" remarks="报警类型（上限，上上限......）" type="int"/>
			<column name="nAlarmState" remarks="报警状态" type="int"/>
			<column name="nAlarmlevel" remarks="报警级别" type="int"/>
			<column name="strEventTime" remarks="报警时间" type="datetime"/>
			<column name="strTagName" remarks="标签名称" type="nvarchar(100)"/>
			<column name="strTagDes" remarks="标签描述" type="nvarchar(128)"/>
			<column name="strArea" remarks="区域，为DCS日志设计" type="nvarchar(64)">
				<constraints nullable="false"/>
			</column>
			<column name="strDevice" remarks="装置，为DCS日志设计" type="nvarchar(64)">
				<constraints nullable="false"/>
			</column>
			<column name="strUnit" remarks="单元,为DCS日志设计" type="nvarchar(64)">
				<constraints nullable="false"/>
			</column>
			<column name="strMsgDes" remarks="报警描述" type="nvarchar(100)"/>
			<column name="fAlarmlimit" remarks="报警阀值" type="float(53)"/>
			<column name="strAlarmValue" remarks="报警实时值" type="nvarchar(30)"/>
			<column name="strRecoveryTime" remarks="恢复时间" type="datetime"/>
			<column name="strAckedTime" remarks="确认时间" type="datetime"/>
			<column name="strAckedComment" remarks="恢复内容" type="nvarchar(255)"/>
			<column name="nSource" remarks="报警来源" type="int"/>
			<column name="strIsHide" remarks="是否隐藏后产生0：非隐藏后生产 1：隐藏后生成" type="char(1)"/>
			<column name="strNodeDomain" type="nvarchar(255)"/>
			<column name="strTypeName" remarks="报警类型" type="nvarchar(10)"/>
			<column name="strAlarmTypeDes" remarks="报警类型描述" type="nvarchar(60)"/>
			<column name="nPushStatus" type="int"/>
			<column name="strAlarmLevelDes" remarks="报警级别描述" type="nvarchar(30)"/>
			<column name="nDomainNum" type="int"/>
		</createTable>
	</changeSet>
	<changeSet author="WangXun" id="1579227388687-2">
		<createTable remarks="生产报警信息" tableName="CF_AlarmHis">
			<column name="ID" remarks="主键" type="nvarchar(50)">
				<constraints primaryKey="true" primaryKeyName="PK_CF_AlarmHis"/>
			</column>
			<column name="nAlarmType" remarks="报警类型（上限，上上限......）" type="int"/>
			<column name="nAlarmState" remarks="报警状态" type="int"/>
			<column name="nAlarmlevel" remarks="报警级别" type="int"/>
			<column name="strEventTime" remarks="报警时间" type="datetime"/>
			<column name="strTagName" remarks="标签名称" type="nvarchar(100)"/>
			<column name="strTagDes" remarks="标签描述" type="nvarchar(128)">
				<constraints nullable="false"/>
			</column>
			<column name="strArea" remarks="区域，为DCS日志设计" type="nvarchar(64)">
				<constraints nullable="false"/>
			</column>
			<column name="strDevice" remarks="装置，为DCS日志设计" type="nvarchar(64)">
				<constraints nullable="false"/>
			</column>
			<column name="strUnit" remarks="单元,为DCS日志设计" type="nvarchar(64)">
				<constraints nullable="false"/>
			</column>
			<column name="strMsgDes" remarks="报警描述" type="nvarchar(100)"/>
			<column name="fAlarmlimit" remarks="报警阀值" type="float(53)"/>
			<column name="strAlarmValue" remarks="报警实时值" type="nvarchar(30)"/>
			<column name="strRecoveryTime" remarks="恢复时间" type="datetime"/>
			<column name="strAckedTime" remarks="确认时间" type="datetime"/>
			<column name="strAckedComment" remarks="恢复内容" type="nvarchar(255)"/>
			<column name="nSource" remarks="报警来源" type="int"/>
			<column name="strIsHide" remarks="是否隐藏后产生0：非隐藏后生产 1：隐藏后生成" type="char(1)"/>
			<column name="strNodeDomain" type="nvarchar(255)"/>
			<column name="strTypeName" remarks="报警类型" type="nvarchar(10)"/>
			<column name="strAlarmTypeDes" remarks="报警类型描述" type="nvarchar(60)"/>
			<column name="nPushStatus" type="int"/>
			<column name="strAlarmLevelDes" remarks="报警级别描述" type="nvarchar(30)"/>
			<column name="nDomainNum" type="int"/>
		</createTable>
	</changeSet>
	<changeSet author="WangXun" id="1579227388687-3">
		<createTable remarks="抑制报警设置" tableName="CF_ForbidAlarm">
			<column name="ID" remarks="主键ID" type="nvarchar(50)">
				<constraints primaryKey="true" primaryKeyName="PK_FBALARMID"/>
			</column>
			<column name="nAlarmType" remarks="报警类型（上限，上上限......）" type="int">
				<constraints nullable="false"/>
			</column>
			<column name="strTagName" remarks="标签名称" type="nvarchar(100)">
				<constraints nullable="false"/>
			</column>
			<column name="strTagDes" remarks="标签描述" type="nvarchar(100)">
				<constraints nullable="false"/>
			</column>
			<column name="strOperater" remarks="操作人" type="nvarchar(100)">
				<constraints nullable="false"/>
			</column>
			<column name="strForbidTime" remarks="抑制时间" type="datetime">
				<constraints nullable="false"/>
			</column>
			<column name="TAG_AREA" remarks="标签所属区域" type="nvarchar(128)"/>
			<column name="TAG_DEVICE" remarks="标签所属装置" type="nvarchar(128)"/>
			<column name="TAG_UNIT" remarks="标签所属单元" type="nvarchar(128)"/>
		</createTable>
	</changeSet>
	<changeSet author="WangXun" id="1579227388687-4">
		<createTable remarks="隐藏报警设置" tableName="CF_HideAlarm">
			<column name="ID" remarks="主键ID" type="nvarchar(50)">
				<constraints primaryKey="true" primaryKeyName="PK_HDALARMID"/>
			</column>
			<column name="nAlarmType" remarks="报警类型（上限，上上限......）" type="int">
				<constraints nullable="false"/>
			</column>
			<column name="strTagName" remarks="标签名称" type="nvarchar(100)">
				<constraints nullable="false"/>
			</column>
			<column name="strTagDes" remarks="标签描述" type="nvarchar(100)">
				<constraints nullable="false"/>
			</column>
			<column name="strOperater" remarks="操作人" type="nvarchar(100)">
				<constraints nullable="false"/>
			</column>
			<column name="strHideTime" remarks="隐藏时间" type="datetime">
				<constraints nullable="false"/>
			</column>
			<column name="TAG_AREA" remarks="标签所属区域" type="nvarchar(128)"/>
			<column name="TAG_DEVICE" remarks="标签所属装置" type="nvarchar(128)"/>
			<column name="TAG_UNIT" remarks="标签所属单元" type="nvarchar(128)"/>
		</createTable>
	</changeSet>
	<changeSet author="WangXun" id="1579227388687-5">
		<createTable remarks="组态节点状态信息" tableName="CF_NodeState">
			<column name="ID" remarks="主键ID" type="nvarchar(50)">
				<constraints primaryKey="true" primaryKeyName="PK_NODESTATEID"/>
			</column>
			<column name="nCPULoad" remarks="CPU负荷" type="int">
				<constraints nullable="false"/>
			</column>
			<column name="fTemperature" remarks="温度" type="float(53)">
				<constraints nullable="false"/>
			</column>
			<column name="nMemoryLoad" remarks="内存负荷" type="int">
				<constraints nullable="false"/>
			</column>
			<column name="nState" remarks="状态 -1:初始化  0：不正常  1:正常" type="int">
				<constraints nullable="false"/>
			</column>
			<column name="nNodeType" remarks="节点类型（0普通节点，1网闸安全侧，2网闸开放侧，3云卡）" type="int">
				<constraints nullable="false"/>
			</column>
			<column name="nNodePCID" remarks="PC号" type="int"/>
			<column name="strStateTime" remarks="更新时间" type="datetime">
				<constraints nullable="false"/>
			</column>
			<column name="strSerialNum" remarks="网闸序列号" type="nvarchar(20)"/>
			<column name="fNetworkALoad" type="float(53)"/>
			<column name="fNetworkBLoad" type="float(53)"/>
		</createTable>
	</changeSet>
	<changeSet author="WangXun" id="1579227388687-6">
		<createTable remarks="日志表" tableName="SM_Log">
			<column name="ID" remarks="自增序号" type="nvarchar(50)">
				<constraints primaryKey="true" primaryKeyName="PK_NLOGID"/>
			</column>
			<column name="strOperater" remarks="创建人" type="nvarchar(100)">
				<constraints nullable="false"/>
			</column>
			<column defaultValueComputed="getdate()"
					defaultValueConstraintName="DF_SM_Log_strOperateTime"
					name="strOperateTime"
					remarks="创建时间"
					type="datetime">
				<constraints nullable="false"/>
			</column>
			<column defaultValueConstraintName="DF_SM_Log_nLogSource" defaultValueNumeric="2"
					name="nLogSource"
					remarks="日志来源 生产日志 = 1,系统日志 = 2,DCS日志 = 3"
					type="int">
				<constraints nullable="false"/>
			</column>
			<column defaultValueConstraintName="DF_SM_Log_nOperateContentKey"
					defaultValueNumeric="0"
					name="nOperateContentKey"
					remarks="其他0，登录注销1、新增2、删除3、修改4，置位 = 10,写模拟量值 = 11,"
					type="int">
				<constraints nullable="false"/>
			</column>
			<column defaultValueConstraintName="DF_SM_Log_nStatus" defaultValueNumeric="1"
					name="nStatus"
					remarks="状态 1成功  0失败"
					type="int">
				<constraints nullable="false"/>
			</column>
			<column name="strIP" remarks="ip" type="nvarchar(50)">
				<constraints nullable="false"/>
			</column>
			<column name="strLabelName" remarks="标签名" type="nvarchar(64)">
				<constraints nullable="false"/>
			</column>
			<column name="strLabelDescribe" remarks="标签描述" type="nvarchar(128)"/>
			<column name="strArea" remarks="区域，为DCS日志设计" type="nvarchar(64)"/>
			<column name="strDevice" remarks="装置，为DCS日志设计" type="nvarchar(64)"/>
			<column name="strUnit" remarks="单元,为DCS日志设计" type="nvarchar(64)"/>
			<column name="strOperateRoute" remarks="页面编码或者流程图id" type="nvarchar(255)"/>
			<column name="strPreContent" remarks="修改前值" type="nvarchar(255)"/>
			<column name="strafterContent" remarks="修改后值" type="nvarchar(255)"/>
			<column name="strContent" remarks="日志详情" type="nvarchar(255)"/>
		</createTable>
	</changeSet>
	<changeSet author="WangXun" id="1579227388687-7">
		<createIndex indexName="IX_CF_ALARMHIS_strEventTime" tableName="CF_AlarmHis">
			<column name="strEventTime"/>
		</createIndex>
	</changeSet>
	<changeSet author="WangXun" id="1579227388687-8">
		<createIndex indexName="IX_CF_Alarm_C" tableName="CF_Alarm">
			<column name="strTagName"/>
		</createIndex>
	</changeSet>
	<changeSet author="WangXun" id="1579227388687-9">
		<createIndex indexName="IX_CF_Alarm_Soft" tableName="CF_Alarm">
			<column name="nAlarmState"/>
			<column name="nAlarmlevel"/>
			<column name="strEventTime"/>
		</createIndex>
	</changeSet>
	<changeSet author="WangXun" id="1579227388687-10">
		<createIndex indexName="IX_SM_Log" tableName="SM_Log">
			<column defaultValueComputed="getdate()"
					defaultValueConstraintName="DF_SM_Log_strOperateTime"
					name="strOperateTime"/>
		</createIndex>
	</changeSet>

	<changeSet id="W" author="d">

	</changeSet>
</databaseChangeLog>
