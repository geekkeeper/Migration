<?xml version="1.1" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog" xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext" xmlns:pro="http://www.liquibase.org/xml/ns/pro" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd http://www.liquibase.org/xml/ns/pro http://www.liquibase.org/xml/ns/pro/liquibase-pro-3.8.xsd http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.8.xsd">
    <changeSet author="WangXun" id="1576561645670-1">
        <createTable remarks="令牌记录表" tableName="OAUTH_ACCESS_TOKEN">
            <column name="TOKEN_ID" remarks="令牌编号" type="varchar(32)"/>
            <column name="TOKEN" remarks="令牌" type="binary(1)"/>
            <column name="AUTHENTICATION_ID" remarks="认证编号" type="varchar(32)"/>
            <column name="CLIENT_ID" remarks="客户端编号" type="varchar(32)"/>
            <column name="USER_NAME" remarks="用户名" type="varchar(32)"/>
            <column name="AUTHENTICATION" remarks="认证信息" type="binary(1)"/>
            <column name="REFRESH_TOKEN" remarks="刷新令牌" type="varchar(32)"/>
        </createTable>
    </changeSet>
    <changeSet author="WangXun" id="1576561645670-2">
        <createTable remarks="授权客户端" tableName="OAUTH_CLIENT_DETAILS">
            <column name="CLIENT_ID" remarks="客户端编号" type="varchar(32)"/>
            <column name="RESOURCE_IDS" remarks="资源编号" type="varchar(32)"/>
            <column name="CLIENTT_SECRET" remarks="客户端授权" type="varchar(32)"/>
            <column name="SCOPE" remarks="作用域" type="varchar(32)"/>
            <column name="AUTHORIZED_GRANT_TYPES" remarks="授权类型" type="varchar(50)"/>
            <column name="WEB_SERVER_REDIRECT_URI" remarks="重定向地址" type="varchar(255)"/>
            <column name="AUTHORITIES" remarks="授权标识" type="varchar(32)"/>
            <column name="ACCESS_TOKEN_VALIDITY" remarks="验证令牌过期时间" type="varchar(11)"/>
            <column name="REFRESH_TOKEN_VALIDITY" remarks="刷新令牌过期时间" type="varchar(11)"/>
            <column name="ADDITIONAL_INFORMATION" remarks="预留字段JSON" type="varchar(512)"/>
            <column defaultValueComputed="getdate()" defaultValueConstraintName="DF__OAUTH_CLI__CREAT__00AA174D" name="CREATE_TIME" remarks="创建时间" type="datetime"/>
            <column name="ARCHIVED" remarks="标识客户端是否已存档" type="varchar(11)"/>
            <column name="TRUSTED" remarks="是否为受信任" type="varchar(11)"/>
            <column name="AUTOAPPROVE" remarks="是否自动Approval操作" type="varchar(11)"/>
        </createTable>
    </changeSet>
    <changeSet author="WangXun" id="1576561645670-3">
        <createTable remarks="令牌刷新表" tableName="OAUTH_REFRESH_TOKEN">
            <column name="TOKEN_ID" remarks="令牌编号" type="varchar(32)"/>
            <column name="TOKEN" remarks="令牌" type="binary(1)"/>
            <column name="AUTHENTICATION" remarks="认证信息" type="binary(1)"/>
            <column defaultValueComputed="getdate()" defaultValueConstraintName="DF__OAUTH_REF__CREAT__038683F8" name="CREATE_TIME" remarks="创建时间" type="datetime"/>
        </createTable>
    </changeSet>
    <changeSet author="WangXun" id="1576561645670-4">
        <createTable remarks="系统模块表" tableName="PM_MODULE">
            <column name="ID" remarks="模块编号" type="varchar(32)"/>
            <column name="CLIENT_ID" remarks="模块应用编号" type="varchar(32)"/>
            <column name="PARENT_ID" remarks="父模块编号" type="varchar(50)"/>
            <column name="NAME" remarks="模块名称" type="varchar(50)">
                <constraints nullable="false"/>
            </column>
            <column name="URL" remarks="模块连接地址" type="varchar(512)"/>
            <column name="METHOD" remarks="模块请求方式" type="varchar(8)"/>
            <column name="ICON" remarks="模块图标" type="varchar(32)"/>
            <column name="LEVEL" remarks="模块层级" type="varchar(32)"/>
            <column defaultValue="Y" defaultValueConstraintName="DF__PM_MODULE__ENABL__0662F0A3" name="ENABLE" remarks="模块状态:'Y'-启用，‘N’未启用" type="char(1)"/>
            <column name="ORDER" remarks="排序码" type="int"/>
            <column defaultValueComputed="getdate()" defaultValueConstraintName="DF__PM_MODULE__CREAT__075714DC" name="CREATE_TIME" remarks="创建时间" type="datetime"/>
            <column name="CREATE_BY" remarks="创建人" type="varchar(32)"/>
            <column defaultValueComputed="getdate()" defaultValueConstraintName="DF__PM_MODULE__UPDAT__084B3915" name="UPDATE_TIME" remarks="修改时间" type="datetime"/>
            <column name="UPDATE_BY" remarks="修改人" type="varchar(32)"/>
        </createTable>
    </changeSet>
    <changeSet author="WangXun" id="1576561645670-5">
        <createTable remarks="模块行为表" tableName="PM_MODULE_ACTION">
            <column name="ID" remarks="编号" type="varchar(32)"/>
            <column name="MODULE_ID" remarks="模块编号" type="varchar(32)"/>
            <column name="NAME" remarks="角色编号" type="varchar(32)"/>
            <column name="CODE" remarks="行为编码" type="varchar(32)"/>
            <column name="URL" remarks="行为URL" type="varchar(512)"/>
            <column name="METHOD" remarks="行为请求方式" type="varchar(8)"/>
            <column defaultValueComputed="getdate()" defaultValueConstraintName="DF__PM_MODULE__CREAT__0B27A5C0" name="CREATE_TIME" remarks="创建时间" type="datetime"/>
            <column name="CREATE_BY" remarks="创建人" type="varchar(32)"/>
            <column defaultValueComputed="getdate()" defaultValueConstraintName="DF__PM_MODULE__UPDAT__0C1BC9F9" name="UPDATE_TIME" remarks="修改时间" type="datetime"/>
            <column name="UPDATE_BY" remarks="修改人" type="varchar(32)"/>
        </createTable>
    </changeSet>
    <changeSet author="WangXun" id="1576561645670-6">
        <createTable remarks="模块字段表" tableName="PM_MODULE_FIELD">
            <column name="ID" remarks="编号" type="varchar(32)"/>
            <column name="MODULE_ID" remarks="模块编号" type="varchar(32)"/>
            <column name="NAME" remarks="字段名称" type="varchar(50)"/>
            <column name="CODE" remarks="字段编码" type="varchar(32)"/>
            <column defaultValueComputed="getdate()" defaultValueConstraintName="DF__PM_MODULE__CREAT__0EF836A4" name="CREATE_TIME" remarks="创建时间" type="datetime"/>
            <column name="CREATE_BY" remarks="创建人" type="varchar(32)"/>
            <column defaultValueComputed="getdate()" defaultValueConstraintName="DF__PM_MODULE__UPDAT__0FEC5ADD" name="UPDATE_TIME" remarks="修改时间" type="datetime"/>
            <column name="UPDATE_BY" remarks="修改人" type="varchar(32)"/>
        </createTable>
    </changeSet>
    <changeSet author="WangXun" id="1576561645670-7">
        <createTable remarks="角色表" tableName="PM_ROLE">
            <column name="ID" remarks="角色编号" type="varchar(32)"/>
            <column name="TYPE" remarks="角色类型" type="varchar(32)"/>
            <column name="CODE" remarks="角色编码" type="varchar(50)"/>
            <column name="NAME" remarks="角色名称" type="varchar(50)"/>
            <column name="REMARK" remarks="角色描述" type="varchar(255)"/>
            <column defaultValueComputed="getdate()" defaultValueConstraintName="DF__PM_ROLE__CREATE___12C8C788" name="CREATE_TIME" remarks="创建时间" type="datetime"/>
            <column name="CREATE_BY" remarks="创建人" type="varchar(50)"/>
            <column defaultValueComputed="getdate()" defaultValueConstraintName="DF__PM_ROLE__UPDATE___13BCEBC1" name="UPDATE_TIME" remarks="修改时间" type="datetime"/>
            <column name="UPDATE_BY" remarks="修改人" type="varchar(50)"/>
        </createTable>
    </changeSet>
    <changeSet author="WangXun" id="1576561645670-8">
        <createTable remarks="角色资源表" tableName="PM_ROLE_RESOURCE">
            <column name="ID" remarks="编号" type="varchar(32)"/>
            <column name="RESOURCE_TYPE" remarks="资源类型" type="char(1)"/>
            <column name="RESOURCE_ID" remarks="资源编号" type="varchar(32)"/>
            <column name="ROLE_ID" remarks="角色编号" type="varchar(32)"/>
        </createTable>
    </changeSet>
    <changeSet author="WangXun" id="1576561645670-9">
        <createTable remarks="用户表" tableName="PM_USER">
            <column name="ID" remarks="编号" type="varchar(32)"/>
            <column name="EXTERN_ID" remarks="外部标识" type="varchar(32)"/>
            <column name="USER_NAME" remarks="登录用户名" type="varchar(32)"/>
            <column name="PASSWORD" remarks="密码" type="varchar(255)"/>
            <column name="NICK_NAME" remarks="昵称" type="varchar(50)"/>
            <column name="WORK_NO" remarks="工号" type="varchar(50)"/>
            <column name="EMAIL" remarks="邮箱" type="varchar(50)"/>
            <column name="WECHAT" remarks="微信" type="varchar(50)"/>
            <column name="PHONE" remarks="手机" type="varchar(32)"/>
            <column name="ONLINE" remarks="是否在线:'Y'-在线，‘N’-离线" type="char(1)"/>
            <column name="DELETE" remarks="是否删除:‘Y’-已删除，‘N’-未删除" type="char(1)"/>
            <column defaultValue="1" defaultValueConstraintName="DF__PM_USER__ENABLE__1881A0DE" name="ENABLE" remarks="启用状态:'Y'-启用，‘N’未启用" type="char(1)"/>
            <column defaultValueComputed="getdate()" defaultValueConstraintName="DF__PM_USER__CREATE___1975C517" name="CREATE_TIME" remarks="创建时间" type="datetime"/>
            <column name="CREATE_BY" remarks="创建人" type="varchar(50)"/>
            <column defaultValueComputed="getdate()" defaultValueConstraintName="DF__PM_USER__UPDATE___1A69E950" name="UPDATE_TIME" remarks="修改时间" type="datetime"/>
            <column name="UPDATE_BY" remarks="修改人" type="varchar(50)"/>
        </createTable>
    </changeSet>
    <changeSet author="WangXun" id="1576561645670-10">
        <createTable remarks="用户角色" tableName="PM_USER_ROLE">
            <column name="ID" remarks="编号" type="varchar(32)"/>
            <column name="ROLE_ID" remarks="角色编号" type="varchar(32)"/>
            <column name="USER_ID" remarks="用户编号" type="varchar(32)"/>
        </createTable>
    </changeSet>
    <changeSet author="WangXun" id="1576561645670-11">
        <addPrimaryKey clustered="false" columnNames="TOKEN_ID" constraintName="PK_OAUTH_ACCESS_TOKEN" tableName="OAUTH_ACCESS_TOKEN"/>
    </changeSet>
    <changeSet author="WangXun" id="1576561645670-12">
        <addPrimaryKey clustered="false" columnNames="CLIENT_ID" constraintName="PK_OAUTH_CLIENT_DETAILS" tableName="OAUTH_CLIENT_DETAILS"/>
    </changeSet>
    <changeSet author="WangXun" id="1576561645670-13">
        <addPrimaryKey clustered="false" columnNames="TOKEN_ID" constraintName="PK_OAUTH_REFRESH_TOKEN" tableName="OAUTH_REFRESH_TOKEN"/>
    </changeSet>
    <changeSet author="WangXun" id="1576561645670-14">
        <addPrimaryKey clustered="false" columnNames="ID" constraintName="PK_PM_MODULE_ACTION" tableName="PM_MODULE_ACTION"/>
    </changeSet>
    <changeSet author="WangXun" id="1576561645670-15">
        <addPrimaryKey clustered="false" columnNames="ID" constraintName="PK_PM_MODULE_FIELD" tableName="PM_MODULE_FIELD"/>
    </changeSet>
    <changeSet author="WangXun" id="1576561645670-16">
        <addPrimaryKey clustered="false" columnNames="ID" constraintName="PK_PM_ROLE" tableName="PM_ROLE"/>
    </changeSet>
    <changeSet author="WangXun" id="1576561645670-17">
        <addPrimaryKey clustered="false" columnNames="ID" constraintName="PK_PM_ROLE_RESOURCE" tableName="PM_ROLE_RESOURCE"/>
    </changeSet>
    <changeSet author="WangXun" id="1576561645670-18">
        <addPrimaryKey clustered="false" columnNames="ID" constraintName="PK_PM_USER" tableName="PM_USER"/>
    </changeSet>
    <changeSet author="WangXun" id="1576561645670-19">
        <addPrimaryKey clustered="false" columnNames="ID" constraintName="PK_PM_USER_ROLE" tableName="PM_USER_ROLE"/>
    </changeSet>
    <changeSet author="WangXun" id="1576561645670-20">
        <addPrimaryKey clustered="false" columnNames="ID" constraintName="PK_SYS_RESOURCE" tableName="PM_MODULE"/>
    </changeSet>
</databaseChangeLog>
