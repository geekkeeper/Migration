# 汇得项目数据库修改记录

## 数据库更新记录(20200226)：

#### 一、权限管理模块

1. “模块表”增加“数据地址”和“数据域标识字段”；
2. 新增“角色数据域表”

#### 二、生产监视模块

1. 增加“视频树表”和“视频树账户关系表”；
2. 删除“视频账户表”“项目架构编号”字段。

#### 三、基础数据模块（标签表）

1. 增加“系统标识”字段；
2. 修改“标签数据类型”和“外部数据类型”字段数据类型为varchar(16);
3. 增加“单元(CELL)”字段，UNIT字段表示“单位”；
4. 增加“历史库编码(HDBS_CODE)”字段;
5. 修改实时库编码字段为(RDBS_CODE);
6. 增加“网络节点编码”字段。

## 数据库更新记录(20200227)：

#### 一、权限管理模块

1. 角色数据域表添加控制方向字段

#### 二、基础数据模块

1. 增加“节点服务关系表；
2. 增加“特殊标签表”；
3. 修改“节点编码”统一为“NODE_CODE”；
4. “标签表”删除标签类型字段；
5. 生产报警表、生产报警历史表均添加“隐藏标识”字段；
6. “报警等级颜色表”修改为“报警颜色表”；通过“表示类型"字段区分实际含义（报警等级、报警状态）；

#### 三、生产监视模块

**项目标签关系表修改记录：**

1. 删除字段：节点名称；
2. 添加字段：标签类型 。

## 数据库更新记录(20200228)：

所有表、字段、约束及变更集添加注释

#### 一、权限管理模块

#### 二、基础数据模块

1. 实时库服务、算法运行服务、数据采集服务、标签表等表中“实时库编码(RTDB_SERVICE_CODE)”和“‘历史库编码(HDB_SERVICE_CODE)”字段统一改为“RDBS_CODE”和“HDBS_CODE”；
2. 修改“报表模板表(GT_REPORT_TEMPLETE)”名称为"GT_REPORT_TEMPLATE";
3. “报警处理表”中字段“报警编号(ALARM_ID)”修改为“报警类型(ALARM_TYPE);

#### 三、生产监视模块

## 数据库更新记录(20200304)：

数据库脚本添加Oracle兼容内容。

#### 一、生产监视模块

将“系统日志”和“生产日志”合并为“日志表”；

数据库脚本添加Oracle兼容内容。

## 数据库更新记录(20200305)：

#### 一、生产监视模块

1. 增加“报警设置表”，用于设置报警消音和报警灯闪烁；
2. “报警处理记录表”增加“项目编号”字段，并修改“报警处理类型”字段数据类型；
3. 修改“日志表”建表注释；
4. “Gis位置表”添加“位置名称”字段；

## 数据库更新记录(20200309)：

#### 一、基础数据模块

1. 组织机构表：增加“同步标识”和“同步时间”字段；
2. 人员表：增加“内码”、“同步标识”和“同步时间”字段；
3. 添加“岗位表”和“岗位人员关系表”。

#### 二、生产监视模块

生产报警表、系统报警表、报警历史表、报警处理表和日志表分别增加“标签描述”、“标签区域”、“标签装置”和“标签单元”字段；

## 数据库更新记录(20200310)：

#### 一、基础数据模块

1. 字典键表：增加“语言编码(LANGUAGE_CODE)”字段；
2. 字段项表：增加“语言编码(LANGUAGE_CODE)”和键编码(KEY_CODE)字段；
3. 标签表：修改“量程下线”字段为“RANGE_BOTTOM”；

#### 二、生产监视模块

趋势组表:修改趋势组类型（type）为“TYPE_CODE”数据类型为varchar(32);

## 数据库更新记录(20200311)：

#### 一、基础数据模块

1. 增加“流程图标签关系表”

#### 二、生产监视模块

1. 增加“角色标签控制关系表”(pm_role_tag);
2. 项目标签关系表：删除“标签名称”、GT工程编码、项目编号组合唯一键；删除“GT工程编号”非空约束；删除“节点编码”非空约束；增加“实时库编码”非空约束；

#### 三、权限管理模块

角色数据域表：添加“精确控制行为”字段；修改“精确控制”为“精确控制资源”(precise_resource);修改控制方向字段为(DIRECTIVITY)；

## 数据库更新记录(20200318)：

#### 一、基础数据模块

1. 组织机构表(BD_ORGANIZATION)：删除标识、外部标识、系统标识、同步标识添加默认值约束，默认值为‘N’；
2. 人员表(BD_PERSON)：删除“人员名称”唯一约束；“同步标识”字段添加默认值约束，默认值为‘N’；

#### 二、生产监视模块

1. GIS位置标记表(pm_gis_position)添加“备注信息(REMARK)”字段;
2. GIS位置标签关系表(pm_gis_tag )添加“标签类型(TAG_TYPE)”字段；

## 数据库更新记录(20200319)：

#### 一、基础数据模块

1. 

#### 二、生产监视模块

1. 增加“标签表”和“特殊标签表” 数据库表数据冗余；
2. 报警处理表拆分为“报警隐藏表”和“报警抑制表”；
3. 生产报警表、系统报警表、报警历史表分别删除“标签描述”、“标签区域”、“标签装置”和“标签单元”冗余字段；

## 数据库更新记录(20200319)：

#### 一、基础数据模块

1. 标签表(GT_TAG)删除唯一约束；

#### 二、生产监视模块

1. 删除标签表(PM_TAG)和特殊标签表(PM_SPECIAL_TAG)

#### 三、权限管理模块

1. 用户表(AM_USER)删除唯一约束；

## 数据库更新记录(20200325)：

#### 一、基础数据模块

1. 

#### 二、生产监视模块

1. 报警抑制表添加报警等级字段；
2. 添加历史报警备份表

#### 三、权限管理模块



## 数据库更新记录(20200326)：

#### 一、基础数据模块

1. 

#### 二、生产监视模块

1. GIS位置标签关系表(PM_GIS_TAG)：项目编号取消非空约束；
2. 项目标签关系表(PM_PROJECT_TAG)  实时库编码删除非空约束（特殊标签不进实时库）；
3. 趋势组表(PM_TREND_GROUP) ：“项目编号”字段取消非空约束；
4. 趋势组标签关系表(PM_TREND_GROUP_TAG)：“项目编号”字段取消非空约束；
5. 高级报表(PM_SUPER_REPORT)：“项目编号”字段取消非空约束；
6. 添加节点状态(PM_NODE_STATE)、进程状态表(PM_PROCESS_STATE)、服务状态表(PM_SERVICE_STATE)

#### 三、权限管理模块

## 数据库更新记录(20200330)：

#### 一、基础数据模块

1. 添加系统配置表(BD_SYSTEM_CONFIG)。

#### 二、生产监视模块

1. 服务状态表(PM_SERVICE_STATE):添加“进程名称(PROCESS_NAME)”字段。
2. 修改节点状态、进程状态和服务状态的状态数据类型.

#### 三、权限管理模块

## 数据库更新记录(20200411)：

#### 一、基础数据模块

1. 流程图表（GT_GRAPH）添加“主流程图标识（MASTER_TAG）”字段；

#### 二、生产监视模块

1. 报表记录表（PM_REPORT_RECORD）添加“文件大小（FILE_SIZE）”字段；

#### 三、权限管理模块

1. 角色资源表（AM_ROLE_RESOURCE）添加”方向标识（DIRECTIVITY）“字段；